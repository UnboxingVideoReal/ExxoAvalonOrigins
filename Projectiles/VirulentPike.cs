using Microsoft.Xna.Framework;using System;using System.Collections.Generic;using System.Linq;using System.Text;using System.Threading.Tasks;using Terraria;using Terraria.ModLoader;using Terraria.ID;namespace ExxoAvalonOrigins.Projectiles{	public class VirulentPike : ModProjectile	{		public override void SetStaticDefaults()		{			DisplayName.SetDefault("Virulent Pike");		}		public override void SetDefaults()		{			Rectangle dims = ExxoAvalonOrigins.getDims("Projectiles/VirulentPike");			projectile.width = dims.Width * 18 / 72;			projectile.height = dims.Height * 18 / 72 / Main.projFrames[projectile.type];			projectile.aiStyle = -1;			projectile.friendly = true;			projectile.penetrate = -1;			projectile.tileCollide = false;			projectile.scale = 1.1f;			projectile.hide = true;			projectile.ownerHitCheck = true;			projectile.melee = true;		}		public override void AI()		{			projectile.direction = Main.player[projectile.owner].direction;			Main.player[projectile.owner].heldProj = projectile.whoAmI;			Main.player[projectile.owner].itemTime = Main.player[projectile.owner].itemAnimation;			projectile.position.X = Main.player[projectile.owner].position.X + Main.player[projectile.owner].width / 2 - projectile.width / 2;			projectile.position.Y = Main.player[projectile.owner].position.Y + Main.player[projectile.owner].height / 2 - projectile.height / 2;			if (!Main.player[projectile.owner].frozen)			{				if (projectile.type == ProjectileID.DarkLance)				{					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.6f;					}					else					{						projectile.ai[0] += 1.4f;					}				}				else if (projectile.type == ProjectileID.Gungnir || projectile.type == ModContent.ProjectileType<OblivionGlaive>() || projectile.type == ModContent.ProjectileType<DarklightLance>() || projectile.type == ModContent.ProjectileType<DurataniumGlaive>() || projectile.type == ModContent.ProjectileType<NaquadahTrident>() || projectile.type == ModContent.ProjectileType<TroxiniumSpear>() || projectile.type == ModContent.ProjectileType<VirulentPike>())				{					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 2.4f;					}					else					{						projectile.ai[0] += 2.1f;					}				}				else if (projectile.type == ProjectileID.ObsidianSwordfish)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.6f;					}					else					{						projectile.ai[0] += 1.5f;					}				}				else if (projectile.type == ProjectileID.Swordfish)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.5f;					}					else					{						projectile.ai[0] += 1.4f;					}				}				else if (projectile.type == ProjectileID.ChlorophytePartisan)				{					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 2.4f;						if (projectile.localAI[0] == 0f && Main.myPlayer == projectile.owner)						{							projectile.localAI[0] = 1f;							Projectile.NewProjectile(projectile.Center.X + projectile.velocity.X * projectile.ai[0], projectile.Center.Y + projectile.velocity.Y * projectile.ai[0], projectile.velocity.X, projectile.velocity.Y, ProjectileID.SporeCloud, projectile.damage, projectile.knockBack, projectile.owner, 0f, 0f);						}					}					else					{						projectile.ai[0] += 2.1f;					}				}				else if (projectile.type == ProjectileID.Trident)				{					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 4f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.2f;					}					else					{						projectile.ai[0] += 0.9f;					}				}				else if (projectile.type == ProjectileID.TheRottedFork)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 4f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.5f;					}					else					{						projectile.ai[0] += 1.3f;					}				}				else if (projectile.type == ProjectileID.Spear)				{					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 4f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.1f;					}					else					{						projectile.ai[0] += 0.85f;					}				}				else if (projectile.type == ProjectileID.MythrilHalberd || projectile.type == ProjectileID.OrichalcumHalberd)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.9f;					}					else					{						projectile.ai[0] += 1.7f;					}				}				else if (projectile.type == ProjectileID.AdamantiteGlaive || projectile.type == ProjectileID.CobaltNaginata || projectile.type == ProjectileID.PalladiumPike || projectile.type == ProjectileID.TitaniumTrident)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 2.1f;					}					else					{						projectile.ai[0] += 1.9f;					}				}				else if (projectile.type == ProjectileID.MushroomSpear)				{					projectile.spriteDirection = -projectile.direction;					if (projectile.ai[0] == 0f)					{						projectile.ai[0] = 3f;						projectile.netUpdate = true;					}					if (Main.player[projectile.owner].itemAnimation < Main.player[projectile.owner].itemAnimationMax / 3)					{						projectile.ai[0] -= 1.3f;					}					else					{						projectile.ai[0] += 1f;					}				}			}			projectile.position += projectile.velocity * projectile.ai[0];			if (projectile.type == ModContent.ProjectileType<OblivionGlaive>() || projectile.type == ModContent.ProjectileType<DarklightLance>() || projectile.type == ModContent.ProjectileType<DurataniumGlaive>() || projectile.type == ModContent.ProjectileType<NaquadahTrident>() || projectile.type == ModContent.ProjectileType<TroxiniumSpear>())			{				projectile.position += projectile.velocity * projectile.ai[0];			}			if (projectile.type == ProjectileID.MushroomSpear)			{				if (projectile.ai[1] == 0f || projectile.ai[1] == 4f || projectile.ai[1] == 8f || projectile.ai[1] == 12f || projectile.ai[1] == 16f || projectile.ai[1] == 20f || projectile.ai[1] == 24f)				{					Projectile.NewProjectile(projectile.position.X + projectile.width / 2, projectile.position.Y + projectile.height / 2, projectile.velocity.X, projectile.velocity.Y, ProjectileID.Mushroom, projectile.damage / 3, 0f, projectile.owner, 0f, 0f);				}				projectile.ai[1] += 1f;			}			if (Main.player[projectile.owner].itemAnimation == 0)			{				projectile.Kill();			}			projectile.rotation = (float)Math.Atan2(projectile.velocity.Y, projectile.velocity.X) + 2.355f;			if (projectile.spriteDirection == -1)			{				projectile.rotation -= 1.57f;			}			if (projectile.type == ProjectileID.DarkLance)			{				if (Main.rand.Next(5) == 0)				{					Dust.NewDust(projectile.position, projectile.width, projectile.height, 14, 0f, 0f, 150, default(Color), 1.4f);				}				var num309 = Dust.NewDust(projectile.position, projectile.width, projectile.height, 27, projectile.velocity.X * 0.2f + projectile.direction * 3, projectile.velocity.Y * 0.2f, 100, default(Color), 1.2f);				Main.dust[num309].noGravity = true;				var dust48 = Main.dust[num309];				dust48.velocity.X = dust48.velocity.X / 2f;				var dust49 = Main.dust[num309];				dust49.velocity.Y = dust49.velocity.Y / 2f;				num309 = Dust.NewDust(projectile.position - projectile.velocity * 2f, projectile.width, projectile.height, 27, 0f, 0f, 150, default(Color), 1.4f);				var dust50 = Main.dust[num309];				dust50.velocity.X = dust50.velocity.X / 5f;				var dust51 = Main.dust[num309];				dust51.velocity.Y = dust51.velocity.Y / 5f;			}			else if (projectile.type == ProjectileID.Gungnir)			{				if (Main.rand.Next(3) == 0)				{					var num310 = Dust.NewDust(new Vector2(projectile.position.X, projectile.position.Y), projectile.width, projectile.height, 57, projectile.velocity.X * 0.2f, projectile.velocity.Y * 0.2f, 200, default(Color), 1.2f);					Main.dust[num310].velocity += projectile.velocity * 0.3f;					Main.dust[num310].velocity *= 0.2f;				}				if (Main.rand.Next(4) == 0)				{					var num311 = Dust.NewDust(new Vector2(projectile.position.X, projectile.position.Y), projectile.width, projectile.height, 43, 0f, 0f, 254, default(Color), 0.3f);					Main.dust[num311].velocity += projectile.velocity * 0.5f;					Main.dust[num311].velocity *= 0.5f;				}			}			else if (projectile.type == ProjectileID.TheRottedFork)			{				var num312 = Dust.NewDust(projectile.position - projectile.velocity * 3f, projectile.width, projectile.height, 115, projectile.velocity.X * 0.4f, projectile.velocity.Y * 0.4f, 140, default(Color), 1f);				Main.dust[num312].noGravity = true;				Main.dust[num312].fadeIn = 1.25f;				Main.dust[num312].velocity *= 0.25f;			}			else if (projectile.type == ModContent.ProjectileType<DarklightLance>())			{				var num313 = Dust.NewDust(projectile.position - projectile.velocity * 3f, projectile.width, projectile.height, 58, projectile.velocity.X * 0.4f, projectile.velocity.Y * 0.4f, 140, default(Color), 1f);				Main.dust[num313].noGravity = true;				Main.dust[num313].fadeIn = 1.25f;				Main.dust[num313].velocity *= 0.25f;			}			else if (projectile.type == ModContent.ProjectileType<OblivionGlaive>())			{				var num314 = Dust.NewDust(projectile.position - projectile.velocity * 3f, projectile.width, projectile.height, 58, projectile.velocity.X * 0.4f, projectile.velocity.Y * 0.4f, 140, default(Color), 1f);				Main.dust[num314].noGravity = true;				Main.dust[num314].fadeIn = 1.25f;				Main.dust[num314].velocity *= 0.25f;				var num315 = Dust.NewDust(projectile.position - projectile.velocity * 3f, projectile.width, projectile.height, 36, projectile.velocity.X * 0.4f, projectile.velocity.Y * 0.4f, 140, default(Color), 1f);				Main.dust[num315].noGravity = true;				Main.dust[num315].fadeIn = 1.25f;				Main.dust[num315].velocity *= 0.25f;			}		}	}}